module.exports = {
  env: {
    es6: true,
    node: true,
  },
  parserOptions: {
    ecmaVersion: 2020,
    sourceType: "module",
  },
  extends: [
    "eslint:recommended",
    "google",
    "plugin:jsdoc/recommended",
  ],
  plugins: [
    "jsdoc",
  ],
  rules: {
    "no-restricted-globals": ["error", "name", "length"],
    "prefer-arrow-callback": "error",
    "quotes": ["error", "double", { "allowTemplateLiterals": true }],
    "max-len": ["error", {
      "code": 120,
      "ignoreUrls": true,
      "ignoreComments": true,
      "ignoreStrings": true,
      "ignoreTemplateLiterals": true,
      "ignoreRegExpLiterals": true,
    }],
    "indent": ["error", 2, {
      "FunctionDeclaration": { "parameters": "first" },
      "FunctionExpression": { "parameters": "first" },
      "CallExpression": { "arguments": "first" },
      "SwitchCase": 1,
    }],
    "comma-dangle": ["error", {
      "arrays": "always-multiline",
      "objects": "always-multiline",
      "imports": "always-multiline",
      "exports": "always-multiline",
      "functions": "never",
    }],
    "require-jsdoc": ["error", {
      "require": {
        "FunctionDeclaration": true,
        "MethodDefinition": false,
        "ClassDeclaration": true,
        "ArrowFunctionExpression": false,
        "FunctionExpression": false,
      },
    }],

    "valid-jsdoc": "off",
    "jsdoc/require-param-type": "off",
    "jsdoc/require-returns-type": "off",
    "jsdoc/require-param-description": "off",
    "jsdoc/require-returns-description": "off",
    "no-unused-vars": ["error", {
      "vars": "all",
      "args": "after-used",
      "varsIgnorePattern": "^_",
      "argsIgnorePattern": "^_",
      "ignoreRestSiblings": true,
    }],
    "camelcase": ["error", {
      "properties": "always",
      "ignoreDestructuring": false,
      "ignoreImports": true,
      "ignoreGlobals": true,
      "allow": [
        "^receipt_email$",
        "^client_secret$",
        "^payment_intent$",
        "^payment_method_types$",
        "^line_items$",
        "^adjustable_quantity$",
        "^success_url$",
        "^cancel_url$",
        "^customer_email$",
        "^created_at$",
        "^expires_at$",
        "^shipping_address_collection$",
        "^allowed_countries$",
        "^integration_check$",
        "^automatic_payment_methods$",
        "^checkout_session$",
        "^webhook_endpoint$",
      ],
    }],
    "object-curly-spacing": ["error", "always"],
    "arrow-parens": ["error", "as-needed"],
    "linebreak-style": "off",
    "new-cap": ["error", {
      "capIsNew": false,
      "newIsCap": true,
      "properties": false,
    }],
  },
  overrides: [
    {
      files: ["**/*.spec.*", "**/*.test.*"],
      env: {
        mocha: true,
        jest: true,
      },
      rules: {
        "require-jsdoc": "off",
        "valid-jsdoc": "off",
        "no-unused-vars": "off",
        "max-len": "off",
        "no-console": "off",
      },
    },
    {
      files: ["**/__mocks__/**"],
      rules: {
        "max-len": "off",
      },
    },
  ],
  globals: {
    "admin": "readonly",
    "stripe": "readonly",
    "process": "readonly",
  },
};
